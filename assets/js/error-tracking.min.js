(function(){const errorData={errors:[],userAgent:navigator.userAgent,url:window.location.href,timestamp:(new Date).toISOString()};let pageVisibilityState=document.visibilityState;function trackError(error,errorType){try{const errorInfo={type:errorType||"runtime",message:error.message||"Unknown error",stack:error.stack||"",timestamp:(new Date).toISOString(),pageVisibility:pageVisibilityState,location:window.location.pathname};errorData.errors.push(errorInfo);if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"){console.error("Error tracked:",errorInfo)}if(localStorage.getItem("cookies-accepted")==="true"){const storedErrors=JSON.parse(localStorage.getItem("js-errors")||"[]");storedErrors.push(errorInfo);if(storedErrors.length>10){storedErrors.shift()}localStorage.setItem("js-errors",JSON.stringify(storedErrors))}}catch(e){console.error("Error in error tracking system:",e)}}window.onerror=function(message,source,lineno,colno,error){trackError(error||{message:message,source:source,lineno:lineno,colno:colno},"global");return false};window.addEventListener("unhandledrejection",function(event){trackError(event.reason||{message:"Unhandled Promise rejection"},"promise")});document.addEventListener("visibilitychange",function(){pageVisibilityState=document.visibilityState});window.addEventListener("beforeunload",function(){if(errorData.errors.length>0&&localStorage.getItem("cookies-accepted")==="true"){const storedErrors=JSON.parse(localStorage.getItem("js-errors")||"[]");const combinedErrors=[...storedErrors,...errorData.errors].slice(-10);localStorage.setItem("js-errors",JSON.stringify(combinedErrors))}});window.errorTracker={trackError:trackError,getErrors:function(){return errorData.errors},clearErrors:function(){errorData.errors=[];if(localStorage.getItem("cookies-accepted")==="true"){localStorage.removeItem("js-errors")}}}})();